<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="http://gwt-flash-bridge.googlecode.com/svn-history/r11/trunk/gfbridge/src/net/gfbridge/flashemul/public/FABridge.js" type="text/javascript"></script>

<script type="text/javascript">
function FlashJavascriptIntegrationTestReady() {
	logCurrentTimeFromJavaScript();
}

function logCurrentTime(msg) {
	var el = FABridge["b_FlashJavascriptIntegrationTest"].root();
	el.actionScriptFunction((new Date()).toString() + ': '+ msg + ' call' );
}

function logCurrentTimeFromJavaScript() {
	logCurrentTime('javascript -> as3');
	setTimeout(	logCurrentTimeFromJavaScript, 5000 );
}

function logCurrentTimeFromAS3() {
	logCurrentTime('as3 -> javascript');
}


$(function() {
	FABridge.addInitializationCallback("b_FlashJavascriptIntegrationTest", FlashJavascriptIntegrationTestReady);
});
</script>

<div>

<h1>Flash JavaScript Integration Test</h1>

<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
id="FlashJavascriptIntegrationTestTest" width="700" height="600"
codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
	<param name="movie" value="http://github.com/pfeilbr/flash-javascript-integration-test/raw/master/bin-debug/FlashJavascriptIntegrationTest.swf" />
	<param name="flashvars" value="bridgeName=b_FlashJavascriptIntegrationTest"/>
	<param name="quality" value="high" />
	<param name="allowScriptAccess" value="always" />
	<embed src="http://github.com/pfeilbr/flash-javascript-integration-test/raw/master/bin-debug/FlashJavascriptIntegrationTest.swf" quality="high"
		width="700" height="600" name="FlashJavascriptIntegrationTestTest" 
		align="middle"
		play="true"
		loop="false"
		quality="high"
		allowScriptAccess="always"
		type="application/x-shockwave-flash"
		pluginspage="http://www.adobe.com/go/getflashplayer" 
		flashvars="bridgeName=b_FlashJavascriptIntegrationTest">
	</embed>
</object>


</div>